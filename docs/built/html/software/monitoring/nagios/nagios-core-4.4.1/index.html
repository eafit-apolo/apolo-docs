

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Nagios Core - 4.4.1 &mdash; apolo-docs 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/sidebar.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Nagios" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

  
    <a href="../../../../index.html">
  

  
    
    <img src="../../../../_static/apolo-white.png" style="width: 150px;" class="logo" alt="Logo"/>
  
    </a>

    
      
      
      
	<div class="version" style="color: rgba(255,255,255,0.5);">
	  0.1
	</div>
      
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../supercomputers/index.html">Supercomputers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../virtualization/index.html">Virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programminglanguages/index.html">Programming Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../applications/index.html">Scientific Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../resourcemanager/index.html">Resource Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Monitoring</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../architecture/index.html">Monitoring Architecture</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Nagios</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Nagios Core - 4.4.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sensu/index.html">Sensu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../elk/index.html">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../grafana/index.html">Grafana</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../operatingsystems/index.html">Operating Systems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to-acknowledge.html">How to Acknowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../report-a-bug.html">Report a Bug</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">apolo-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Software</a> &raquo;</li>
        
          <li><a href="../../index.html">Monitoring</a> &raquo;</li>
        
          <li><a href="../index.html">Nagios</a> &raquo;</li>
        
      <li>Nagios Core - 4.4.1</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/software/monitoring/nagios/nagios-core-4.4.1/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nagios-core-4-4-1">
<span id="nagios-core-4-4-1-index"></span><h1><a class="toc-backref" href="#id2">Nagios Core - 4.4.1</a><a class="headerlink" href="#nagios-core-4-4-1" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#nagios-core-4-4-1" id="id2">Nagios Core - 4.4.1</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-information" id="id3">Basic information</a></p></li>
<li><p><a class="reference internal" href="#directory-hierarchy" id="id4">Directory Hierarchy</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id5">Installation</a></p></li>
<li><p><a class="reference internal" href="#mail-configuration" id="id6">Mail Configuration</a></p></li>
<li><p><a class="reference internal" href="#plugins" id="id7">Plugins</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting" id="id9">Troubleshooting</a></p>
<ul>
<li><p><a class="reference internal" href="#nagios-command-error" id="id10">Nagios Command Error</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#authors" id="id11">Authors</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="basic-information">
<h2><a class="toc-backref" href="#id3">Basic information</a><a class="headerlink" href="#basic-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Deploy date:</strong> 14th August, 2018</p></li>
<li><p><strong>Official Website:</strong> <a class="reference external" href="https://www.nagios.org/about/">https://www.nagios.org/about/</a></p></li>
<li><p><strong>License:</strong> Nagios Open Software License, Nagios Software License, GNU GENERAL PUBLIC LICENSE</p></li>
</ul>
</div>
<div class="section" id="directory-hierarchy">
<h2><a class="toc-backref" href="#id4">Directory Hierarchy</a><a class="headerlink" href="#directory-hierarchy" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>bin:</strong> Nagios binaries.</p></li>
<li><p><strong>dell:</strong> Stores scripts, configuration files, images and
resources of Dell Plugin.</p></li>
<li><p><strong>etc:</strong> Stores Nagios configuration files.</p></li>
<li><p><strong>include</strong></p></li>
<li><p><strong>libexec:</strong> Contains most of the plugins installed.</p></li>
<li><p><strong>sbin:</strong> Nagios scripts</p></li>
<li><p><strong>share:</strong> Contains Web interface files.</p></li>
<li><p><strong>var</strong></p></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id5">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This entry covers the entire process performed for the installation and
configuration of Nagios Core in Centos 7. This process of installation and configuration
is automated using Ansible.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#tested-on-requirements"><strong>Tested on (Requirements)</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#directory-structure">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#ansible-structure">Ansible Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#initial-configuration">Initial Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#dell-repos-yml">dell-repos.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#packages-yml">packages.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#nagios-users-yml">nagios-users.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#apache-config-yml">apache-config.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#firewall-config-yml">firewall-config.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#ipmi-config-yml">ipmi-config.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#mail-config-yml">mail-config.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#snmp-config-yml">snmp-config.yml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-nagios-core">Installing Nagios Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#nagios-install-yml-and-nagios-installed-yml">nagios-install.yml and nagios-installed.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#nagios-config-yml">nagios-config.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#nagios-post-install-yml">nagios-post-install.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#selinux-config-yml">selinux-config.yml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-nagios-plugins">Installing Nagios Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#final-check">Final Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#authors">Authors</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="mail-configuration">
<span id="id1"></span><h2><a class="toc-backref" href="#id6">Mail Configuration</a><a class="headerlink" href="#mail-configuration" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This configuration is automatically set up in the step of synchronization in the taskfile <a class="reference internal" href="installation.html#nagios-config-yml"><span class="std std-ref">nagios-config.yml</span></a> if the base configuration is included in the synchronization list.</p>
</div>
<p>The commands <code class="code bash docutils literal notranslate"><span class="pre">notify-host-by-email</span></code> and <code class="code bash docutils literal notranslate"><span class="pre">notify-service-by-email</span></code> were modified adding the flag -A:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/bin/printf <span class="s2">&quot;MAIL_BODY&quot;</span> <span class="p">|</span> /bin/mail -A nagios -s <span class="s2">&quot;SUBJECT&quot;</span> <span class="nv">$CONTACTEMAIL</span>$
</pre></div>
</div>
<p>In order to uncouple the mail definition from the command line, the flag <code class="code bash docutils literal notranslate"><span class="pre">-A</span> <span class="pre">nagios</span></code> was added. With this option, <strong>mail</strong> will use the configuration defined in the account nagios, in the file
<code class="code bash docutils literal notranslate"><span class="pre">/etc/mail.rc</span></code></p>
</div></blockquote>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>account nagios <span class="o">{</span>
<span class="nb">set</span> <span class="nv">smtp</span><span class="o">=</span>smtp.server.hostname:port
<span class="nb">set</span> <span class="nv">sender</span><span class="o">=</span>nagios@mail
<span class="nb">set</span> <span class="nv">from</span><span class="o">=</span><span class="s2">&quot;nagios@mail&quot;</span>
<span class="nb">set</span> ssl-verify<span class="o">=</span>ignore
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="plugins">
<h2><a class="toc-backref" href="#id7">Plugins</a><a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugins/nagios-plugins.html">Nagios-plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/ipmi-sensors.html">IPMI Sensors - Nagios Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/dell-openmanage.html">Dell OpenManage - Nagios Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/ilo-rest.html">iLO AgentLess Management - Nagios Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/pnp4nagios.html">PNP4Nagios</a></li>
</ul>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Before executing the role it’s important to verify the value of the variables in the file
<code class="code bash docutils literal notranslate"><span class="pre">roles/healthckeck/vars/main.yml</span></code>. These variables were created in order to uncouple from the code things like IPs, URLs and passwords. In the case of passwords, we used <strong>Ansible Vault</strong> for ciphering them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-vault playbooks/healthcheck.yml --ask-vault-pass
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>This Ansible role was created thinking in the Ansible Philosophy: <strong>The tool should be used to represent the state of the server, not as a procedural language but as a declarative one.</strong></p>
<p>This role was developed to be run multiple times in the same server: If the real state doesn’t matches with the role state, the server is modified in order to match both states. If the server has well configured and well installed Nagios and it’s plugins, running the playbook will say <strong>Ok</strong> in most of the tasks, so it  won’t break any configuration.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The flag <code class="code bash docutils literal notranslate"><span class="pre">--ask-vault-pass</span></code> is used because this role uses ansible-vault for encrypting private data like passwords.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<h2><a class="toc-backref" href="#id9">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nagios-command-error">
<span id="nagios-cmd-error"></span><h3><a class="toc-backref" href="#id10">Nagios Command Error</a><a class="headerlink" href="#nagios-command-error" title="Permalink to this headline">¶</a></h3>
<img alt="Nagios Command Error" src="../../../../_images/nagios-cmd-error.png" />
<p>This error occurs when the user generates a modification in the Nagios Command file executing
different actions with the Nagios Web Interface <em>(eg. re-schedule checks)</em>. This error is corrected
with the execution of the task <a class="reference internal" href="installation.html#selinux-config-yml"><span class="std std-ref">selinux-config.yml</span></a>.</p>
<p>By default, the Apache daemon cannot read/write the files under <code class="code bash docutils literal notranslate"><span class="pre">/usr/local/nagios/var/rw</span></code> or
execute from <code class="code bash docutils literal notranslate"><span class="pre">/usr/local/nagios/sbin</span></code> because these directories doesn’t belongs to
the <code class="code bash docutils literal notranslate"><span class="pre">httpd_sys_rw_content_t</span></code> SELinux context and <code class="code bash docutils literal notranslate"><span class="pre">httpd_sys_script_exec_t</span></code> context
respectively. This is what originates the problem.</p>
</div>
</div>
<div class="section" id="authors">
<h2><a class="toc-backref" href="#id11">Authors</a><a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Andrés Felipe Zapata Palacio &lt;<a class="reference external" href="mailto:azapat47&#37;&#52;&#48;eafit&#46;edu&#46;co">azapat47<span>&#64;</span>eafit<span>&#46;</span>edu<span>&#46;</span>co</a>&gt;</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Nagios" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Creative Commons Attribution-NonCommercial 4.0 International License

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>