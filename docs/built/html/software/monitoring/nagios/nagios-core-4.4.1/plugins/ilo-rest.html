

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>iLO AgentLess Management - Nagios Plugin &mdash; apolo-docs 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/sidebar.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="PNP4Nagios" href="pnp4nagios.html" />
    <link rel="prev" title="Dell OpenManage - Nagios Plugin" href="dell-openmanage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

  
    <a href="../../../../../index.html">
  

  
    
    <img src="../../../../../_static/apolo-white.png" style="width: 150px;" class="logo" alt="Logo"/>
  
    </a>

    
      
      
      
	<div class="version" style="color: rgba(255,255,255,0.5);">
	  0.1
	</div>
      
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../supercomputers/index.html">Supercomputers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../virtualization/index.html">Virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../programminglanguages/index.html">Programming Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications/index.html">Scientific Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../resourcemanager/index.html">Resource Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Monitoring</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/index.html">Monitoring Architecture</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Nagios</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">Nagios Core - 4.4.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensu/index.html">Sensu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../elk/index.html">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../grafana/index.html">Grafana</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../operatingsystems/index.html">Operating Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../scientific_libraries/index.html">Scientific Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how-to-acknowledge.html">How to Acknowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../report-a-bug.html">Report a Bug</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">apolo-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../index.html">Software</a> &raquo;</li>
        
          <li><a href="../../../index.html">Monitoring</a> &raquo;</li>
        
          <li><a href="../../index.html">Nagios</a> &raquo;</li>
        
          <li><a href="../index.html">Nagios Core - 4.4.1</a> &raquo;</li>
        
      <li>iLO AgentLess Management - Nagios Plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/software/monitoring/nagios/nagios-core-4.4.1/plugins/ilo-rest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ilo-agentless-management-nagios-plugin">
<span id="ilo-rest-plugin-index"></span><h1><a class="toc-backref" href="#id3">iLO AgentLess Management - Nagios Plugin</a><a class="headerlink" href="#ilo-agentless-management-nagios-plugin" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ilo-agentless-management-nagios-plugin" id="id3">iLO AgentLess Management - Nagios Plugin</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-information" id="id4">Basic information</a></p></li>
<li><p><a class="reference internal" href="#tested-on-requirements" id="id5"><strong>Tested on (Requirements)</strong></a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id6">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id7">Installation</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-hosts-commands-and-services" id="id10">Defining Hosts, commands and services</a></p></li>
<li><p><a class="reference internal" href="#ilo-credentials" id="id11">iLO Credentials</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#troubleshooting" id="id12">Troubleshooting</a></p>
<ul>
<li><p><a class="reference internal" href="#aclocal-1-14-is-missing" id="id13">aclocal-1.14 is missing</a></p></li>
<li><p><a class="reference internal" href="#installation-in-centos-7" id="id14">Installation in CentOS 7</a></p></li>
<li><p><a class="reference internal" href="#network-service-not-implemented" id="id15">Network Service not Implemented</a></p></li>
<li><p><a class="reference internal" href="#ilo-memory-service-in-unknown-state" id="id16">iLO Memory service in UNKNOWN state</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#references" id="id17">References</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="basic-information">
<h2><a class="toc-backref" href="#id4">Basic information</a><a class="headerlink" href="#basic-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Official Website:</strong> <a class="reference external" href="https://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/Others/A-Nagios-Plug-2Din-for-iLO-Agentless-Management-(HPE-ProLiant-Server)/details">https://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/Others/A-Nagios-Plug-2Din-for-iLO-Agentless-Management-(HPE-ProLiant-Server)/details</a></p></li>
<li><p><strong>License:</strong> GPL</p></li>
<li><p><strong>Version:</strong> 1.5 - Nagios HPE iLO RESTful Plugin</p></li>
</ul>
</div>
<div class="section" id="tested-on-requirements">
<h2><a class="toc-backref" href="#id5"><strong>Tested on (Requirements)</strong></a><a class="headerlink" href="#tested-on-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>HPE ProLiant Server</p></li>
<li><p><strong>Nagios Core:</strong> Version <span class="math notranslate nohighlight">\(\boldsymbol{\ge}\)</span> 3.5.0</p></li>
</ul>
</div>
<div class="section" id="dependencies">
<h2><a class="toc-backref" href="#id6">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>curl</p></li>
<li><p>libcurl</p></li>
<li><p>libcurl-devel</p></li>
<li><p>nmap</p></li>
<li><p>libtdb-devel</p></li>
<li><p>python</p></li>
<li><p>net-snmp-utils <em>(Also required by Nagios Core)</em></p></li>
<li><p>glibc-devel <em>(Also required by Nagios Core)</em></p></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id7">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This taskfile is executed only if there aren’t any plugins in the directory <code class="code bash docutils literal notranslate"><span class="pre">/usr/local/nagios/libexec</span></code> that
matches the regular expression <code class="code bash docutils literal notranslate"><span class="pre">*hpeilo*</span></code>. This state is registered in the taskfile
<code class="code bash docutils literal notranslate"><span class="pre">nagios-plugins-installed.yml</span></code>, with the module <strong>find</strong>.</p>
<p>For more information about these registers read the section <a class="reference internal" href="../installation.html#nagios-plugins-installed-yml"><span class="std std-ref">Installing Nagios Plugins</span></a>.</p>
<p>The installation process <a class="footnote-reference brackets" href="#id2" id="id1">1</a> consists of downloading the plugin from the original repository, then it is necessary to
regenerate the configure files if the aclocal version is not 1.14. More information in the
section <a class="reference internal" href="#aclocal-missing"><span class="std std-ref">aclocal-1.14 is missing</span></a>. Finally, the configure, make and make install are executed.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create Temp Dir</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Download iLO REST Plugin</span>
  <span class="nt">git</span><span class="p">:</span>
    <span class="nt">repo</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ilo_plugin_url</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">clone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Reconfigure files for the aclocal in the system</span>
  <span class="nt">shell</span><span class="p">:</span> <span class="s">&quot;autoreconf</span><span class="nv"> </span><span class="s">-vfi&quot;</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">chdir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Exec configure</span>
  <span class="nt">shell</span><span class="p">:</span> <span class="s">&quot;./configure&quot;</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">chdir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Make</span>
  <span class="nt">make</span><span class="p">:</span>
    <span class="nt">chdir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Make install</span>
  <span class="nt">make</span><span class="p">:</span>
    <span class="nt">chdir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>
    <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">install</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id8">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Synchronizes the iLO credential files and the iLO plugin configuration with the version present in the repo and
configures the permissions over Nagios credential file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Assures the existance of the ilo plugin config directory.</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;/usr/local/nagios/etc/ilo&quot;</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Assures the existance of the nagios credentials directory.</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;/etc/nagios&quot;</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Synchronize configuration</span>
  <span class="nt">copy</span><span class="p">:</span>     
    <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;/{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">with_items</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">usr/local/nagios/etc/ilo/ilo.cfg</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">etc/nagios/.nagios_restful_credential.tdb</span>
  <span class="nt">notify</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nagios_restart</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Correct permissions of nagios-credentials file</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/nagios/.nagios_restful_credential.tdb</span>
    <span class="nt">mode</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">0600</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nagios</span>
    <span class="nt">group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nagios</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It’s important to configure nagios as the owner of the nagios credential file as is described in
this configuration taskfile.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id9">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="defining-hosts-commands-and-services">
<h3><a class="toc-backref" href="#id10">Defining Hosts, commands and services</a><a class="headerlink" href="#defining-hosts-commands-and-services" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It’s necessary to read the section <a class="reference internal" href="#nagios-centos-7"><span class="std std-ref">Installation in CentOS 7</span></a> before proceeding to configure.</p>
</div>
<p>For starting the configuration of the iLO plugin, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/local/nagios/libexec/hpeilo_nagios_config
</pre></div>
</div>
<p>Example of simple configuration using the script:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Do you wish to enable passive HPE iLO host discovery (y/n) (Blank is y):
Do you wish to enable active discovery (y/n) (Blank is y):
Do you wish to configure host groups (y/n) (Blank is y):
Enter host group name: ilo-4_example_group
Enter host group &quot;ilo-4_example_group&quot; IP range: 192.168.1.10
Enter host group &quot;ilo-4_example_group&quot; SNMP read-only community string (Blank default value  public):
Enter host group &quot;ilo-4_example_group&quot; SNMP Trap community string (Blank default value  public):
Do you wish to add one more host group (y/n) (Blank is n):
Enter host group check interval time in minutes (Blank default value - 5 minutes ): 1
 default is exists. Do you wish to update or not? (y/n): n
Do you wish to configure iLO credential for single server if there&#39;re different with
the default iLO credential (y/n) (Blank is n):

**************Configured Data****************
PASSIVE_DISCOVERY 1
ACTIVE_DISCOVERY  1
 HOSTGROUP: ilo-4_example_group,192.168.1.10,public,public
CHECK_INTERVAL 1
*********************************************

Do you wish to write above configured data to host-group configuration file. (y/n) (Blank is y):
HPE iLO host-group configuration file saved at /usr/local/nagios/libexec/hpeilo_nagios_config.cfg.
HPE iLO Hosts/Services discovered configuration file is existing:/usr/local/nagios/etc/ilo/ilo.cfg
Do you wish to replace it?(y/n) (Blank is y):
</pre></div>
</div>
<p>With regard to the current question: If you answer NO, then the script will
save a backup in the folder <code class="code bash docutils literal notranslate"><span class="pre">/usr/local/nagios/etc/ilo/.backup/</span></code>, and
will override the configuration file.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Do you wish to run configuration file to complete the process (y/n) (Blank is y):
Running configuration  file ....
Reading host-group configuration file : /usr/local/nagios/libexec/hpeilo_nagios_config.cfg
Discovery using configuration file
passive configuration enabled
[Failed]
Restart snmptrapd
Redirecting to /bin/systemctl restart snmptrapd.service
[Done]
active configuration enabled
Scan the network range: 192.168.1.10-192.168.1.10   with the total hosts &#39;1&#39;
env: /etc/init.d/nagios: Permiso denegado
Progress: 100% (scanned 1 of 1 hosts)
Total hosts &#39;1&#39; added of &#39;1&#39; hosts
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In version 1.5 of this plugin, there is an unimplemented service, so it’s necessary to
do the procedure explained in the section <a class="reference internal" href="#ilo-network-not-implemented"><span class="std std-ref">Network Service not Implemented</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you created the temporal file /etc/init.d/nagios, it’s important to delete it after generating
the configuration of iLO plugin.</p>
</div>
</div>
<div class="section" id="ilo-credentials">
<h3><a class="toc-backref" href="#id11">iLO Credentials</a><a class="headerlink" href="#ilo-credentials" title="Permalink to this headline">¶</a></h3>
<p>The iLO credentials used by the plugin are cyphered and stored in the file
<code class="code bash docutils literal notranslate"><span class="pre">/etc/nagios/.nagios_restful_credential.tdb</span></code> and can be modified with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/local/nagios/libexec/credit_save -H &lt;hostname&gt; <span class="o">[</span>-V<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Params</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-H HOST</p></td>
<td><p>Hostname, Host IP or default if you want to stablish default credentials</p></td>
</tr>
<tr class="row-odd"><td><p>-V</p></td>
<td><p>Version number</p></td>
</tr>
<tr class="row-even"><td><p>-h</p></td>
<td><p>Prints this help information</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="troubleshooting">
<h2><a class="toc-backref" href="#id12">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="aclocal-1-14-is-missing">
<span id="aclocal-missing"></span><h3><a class="toc-backref" href="#id13">aclocal-1.14 is missing</a><a class="headerlink" href="#aclocal-1-14-is-missing" title="Permalink to this headline">¶</a></h3>
<p>If your version of aclocal is different than 1.14 it is necessary to regenerate the <strong>configure</strong> files in order to
compile correctly the plugin.</p>
<p>This is possible executing the command <code class="code bash docutils literal notranslate"><span class="pre">autoreconf</span> <span class="pre">-vfi</span></code> in the source directory. If this is not executed,
when <code class="code bash docutils literal notranslate"><span class="pre">./configure</span></code> is executed the following error message will appear.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>WARNING: <span class="s1">&#39;aclocal-1.14&#39;</span> is missing on your system.
You should only need it <span class="k">if</span> you modified <span class="s1">&#39;acinclude.m4&#39;</span> or
<span class="s1">&#39;configure.ac&#39;</span> or m4 files included by <span class="s1">&#39;configure.ac&#39;</span>.
The <span class="s1">&#39;aclocal&#39;</span> program is part of the GNU Automake package:
&lt;http://www.gnu.org/software/automake&gt;
It also requires GNU Autoconf, GNU m4 and Perl in order to run:
&lt;http://www.gnu.org/software/autoconf&gt;
&lt;http://www.gnu.org/software/m4/&gt;
&lt;http://www.perl.org/&gt;
</pre></div>
</div>
</div>
<div class="section" id="installation-in-centos-7">
<span id="nagios-centos-7"></span><h3><a class="toc-backref" href="#id14">Installation in CentOS 7</a><a class="headerlink" href="#installation-in-centos-7" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Although the official page provides a compatible version with CentOS 7, the scripts for generating
the configuration files are written for a CentOS version that still uses init, searching information
in the files that match the following regular expression: <code class="code bash docutils literal notranslate"><span class="pre">/etc/init.d/nagios*</span></code></p>
</div>
<p>The error will show an error output during the execution of the configuration scripts as the showed below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Do you wish to write above configured data to host-group configuration file. <span class="o">(</span>y/n<span class="o">)</span> <span class="o">(</span>Blank is y<span class="o">)</span>:
HPE iLO host-group configuration file saved at /usr/local/nagios/libexec/hpeilo_nagios_config.cfg
grep: /etc/init.d/nagios*: No existe el fichero o el directorio
dirname: falta un operando
Pruebe <span class="s1">&#39;dirname --help&#39;</span> para más información.
</pre></div>
</div>
<p>In this installation, CentOS 7 configured Nagios Daemon with systemd specifications, so the file
/etc/init.d/nagios* was not created.</p>
<p>In order not to modify the code of the iLO plugin scripts, the alternative proposed here is to generate
a temporal file <code class="code bash docutils literal notranslate"><span class="pre">/etc/init.d/nagios</span></code> during the generation of the configuration files with
the following content:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">NagiosIloCfgFile</span><span class="o">=</span>/usr/local/nagios/etc/nagios.cfg
</pre></div>
</div>
</div>
<div class="section" id="network-service-not-implemented">
<span id="ilo-network-not-implemented"></span><h3><a class="toc-backref" href="#id15">Network Service not Implemented</a><a class="headerlink" href="#network-service-not-implemented" title="Permalink to this headline">¶</a></h3>
<p>The services provided by this plugin are:</p>
<ol class="arabic simple">
<li><p>System Health</p></li>
<li><p>Fan</p></li>
<li><p>Memory</p></li>
<li><p>Network</p></li>
<li><p>Power Supply</p></li>
<li><p>Processor</p></li>
<li><p>Storage</p></li>
<li><p>Temperature</p></li>
</ol>
<p>Although Network function is not implemented, the scripts written by the developers of the plugin generate configuration
lines for this unimplemented function. So, after generating the configuration files with the iLO plugin script, it is
necessary to remove manually this service from the service definitions generated.</p>
<p>It’s necessary to remove the definitions of the service and the servicegroup.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>define servicegroup <span class="o">{</span>
  servicegroup_name    Network
  members              server1, Network, server2, Network
<span class="o">}</span>

define service <span class="o">{</span>
  use                 generic-iLO-service
  hostgroup_name      group-name
  service_description Network
  check_command       nagios_hpeilo_restful_engine!4
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ilo-memory-service-in-unknown-state">
<h3><a class="toc-backref" href="#id16">iLO Memory service in UNKNOWN state</a><a class="headerlink" href="#ilo-memory-service-in-unknown-state" title="Permalink to this headline">¶</a></h3>
<p>The error message displayed in the <strong>Status information</strong> field in the Nagios <strong>Service Status Details</strong> is
normal when the machine is powered off.</p>
<p>Message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Check iLO credit is correct saved.<span class="o">(</span>/usr/local/nagios/libexec/credit_save -H <span class="m">10</span>.150.4.188<span class="o">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id17">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>“User’s Manual Nagios Plug-in for HPE iLO RESTful Extension”, Hewlett Packard Enterprise (HPE). Retrieved December 3, 2018, from <a class="reference external" href="https://goo.gl/knRFPr">https://goo.gl/knRFPr</a>.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pnp4nagios.html" class="btn btn-neutral float-right" title="PNP4Nagios" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dell-openmanage.html" class="btn btn-neutral float-left" title="Dell OpenManage - Nagios Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Creative Commons Attribution-NonCommercial 4.0 International License

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>